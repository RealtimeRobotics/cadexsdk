<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CAD Exchanger SDK: Delayed Conversion</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link rel="icon" type="image/png" sizes="16x16" href="https://cloud.cadexchanger.com/assets/images/icon16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://cloud.cadexchanger.com/assets/images/icon32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://cloud.cadexchanger.com/assets/images/icon96.png">
<link href="https://fonts.googleapis.com/css?family=Nunito:300" rel="stylesheet">
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="cadex_doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<a id="logo" href="https://cadexchanger.com/products/sdk" style="height:48px">
  <img id="projectlogo" alt="Logo" src="logo-36.png"/>
  <span id="projectname" style="padding-left:0.5em;">CAD Exchanger SDK</span>
</a>
</div>
<div class="body-content">
<div class="collapsible">
  <a id="show-menu-button" href="#">Hide menu</a>
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sdk_delayed_conversion_page.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Delayed Conversion </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#sdk_delayed_conversion_overview">Overview</a></li>
<li class="level1"><a href="#sdk_delayed_conversion_benefits">Benefits</a></li>
<li class="level1"><a href="#sdk_delayed_conversion_formats">Supported data and formats</a><ul><li class="level2"><a href="#sdk_delayed_conversion_formats_jt">JT specificity</a></li>
</ul>
</li>
<li class="level1"><a href="#sdk_delayed_conversion_pitfalls">Potential pitfalls</a><ul><li class="level2"><a href="#sdk_delayed_conversion_drawback_performance">Longer conversion times</a></li>
<li class="level2"><a href="#sdk_delayed_conversion_drawback_imbalance">Imbalanced data access times</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="sdk_delayed_conversion_overview"></a>
Overview</h1>
<p>Delayed conversion allows to incrementally convert the model during its life span. This primarily applies in import scenarios when working with large assemblies consisting of multiple parts. Instead of complete one-shot import operation (in <a class="el" href="classcadex_1_1_base___reader.html#a77a7126466bf247471f8e05b2ea6c825" title="Converts read file into a resulting model. ">Base_Reader::Transfer()</a>) when all model data contents are loaded from external file and converted into target representations much more light-weight structures are created under the cover. Real loading and conversion takes place upon first access to data.</p>
<p>This behavior is controlled by the <a class="el" href="classcadex_1_1_base___reader_parameters.html#ab7015df778b15322f9df7944a7696841">DelayedConversion()</a>. By default, this parameter is false in order to provide a blocking style behavior (i.e. conversion fully completes upon <a class="el" href="classcadex_1_1_base___reader.html#a77a7126466bf247471f8e05b2ea6c825" title="Converts read file into a resulting model. ">Base_Reader::Transfer()</a> call exit). To take advantage of delayed conversion this parameter should be set to true in an object of a respective subclass of <a class="el" href="classcadex_1_1_base___reader_parameters.html" title="A base class for most frequently used parameters of all readers. ">Base_ReaderParameters</a> (e.g. <a class="el" href="classcadex_1_1_s_t_e_p___reader_parameters.html" title="Defines parameters of the STEP_Reader. ">STEP_ReaderParameters</a>):</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;cadex/STEP_Reader.hxx&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;cadex/STEP_ReaderParameters.hxx&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecadex.html">cadex</a>;</div><div class="line"></div><div class="line"><a class="code" href="classcadex_1_1_model_data___model.html">ModelData_Model</a> aModel;</div><div class="line"><a class="code" href="classcadex_1_1_s_t_e_p___reader.html">STEP_Reader</a> aReader;</div><div class="line"><span class="keyword">auto</span>&amp; aParam = aReader.<a class="code" href="classcadex_1_1_s_t_e_p___reader.html#abf13828ebae255f695eb13a43c0f44ac">Parameters</a>();</div><div class="line">aParam.<a class="code" href="classcadex_1_1_base___reader_parameters.html#a619c42f223c2164d3d4aaf8ae2a6a605">DelayedConversion</a>() = <span class="keyword">true</span>;</div><div class="line">aReader.<a class="code" href="classcadex_1_1_base___reader.html#a94abcc1e36e1301ab7c058d56b128eb6">ReadFile</a> (<span class="stringliteral">&quot;myfile.stp&quot;</span>) &amp;&amp; aReader.<a class="code" href="classcadex_1_1_base___reader.html#a77a7126466bf247471f8e05b2ea6c825">Transfer</a> (aModel);</div></div><!-- fragment --><h1><a class="anchor" id="sdk_delayed_conversion_benefits"></a>
Benefits</h1>
<p>Key benefits of delayed conversion include greater responsiveness of the application (due to shorter import times) and reduced memory footprint. This is especially beneficial when working with large assemblies consisting of multiple sub-assemblies and parts when the user may only intend to import particular sub-assembly or part. In such scenario, delayed conversion allows to quickly import a product structure (assembly/part tree), after what the user would be able to select a sub-tree of interest and only required parts would be loaded.</p>
<p>Taking advantage of delayed conversion CAD Exchanger GUI itself is able to offer greater user experience by gradually loading 3D model and displaying it simultaneously with conversion running in parallel threads.</p>
<h1><a class="anchor" id="sdk_delayed_conversion_formats"></a>
Supported data and formats</h1>
<p>Readers of the following formats support delayed conversion: </p><ul>
<li>ACIS; </li>
<li>IGES; </li>
<li>JT; </li>
<li>Parasolid; </li>
<li>Rhino; </li>
<li>SolidWorks; </li>
<li>STEP; </li>
<li>Native CAD Exchanger format.</li>
</ul>
<p>The following data segments which are typically the most heavy-weight in the file support delayed conversion: </p><ul>
<li><a class="el" href="classcadex_1_1_model_data___b_rep_representation.html">B-Rep representations</a>; </li>
<li><a class="el" href="classcadex_1_1_model_data___poly_representation.html">Polygonal representations</a>; </li>
<li><a class="el" href="sdk_data_model_properties.html">Properties</a>; </li>
<li>PMI (Product and Manufacturing Information).</li>
</ul>
<h2><a class="anchor" id="sdk_delayed_conversion_formats_jt"></a>
JT specificity</h2>
<p>Due to specificities of the JT format JT reader makes even greater possibility of delayed conversion by deferring parsing JT file data segments (such as XT B-Rep, JT B-Rep, ShapeLOD, Meta Data and PMI data segments). This allows to additionally minimize amount of data to be loaded and parsed when reading JT files.</p>
<h1><a class="anchor" id="sdk_delayed_conversion_pitfalls"></a>
Potential pitfalls</h1>
<p>Taking full advantage of delayed conversion requires its careful use by the application developers willing to integrate it into their application. Naive use can lead to the following potential downsides:</p>
<h2><a class="anchor" id="sdk_delayed_conversion_drawback_performance"></a>
Longer conversion times</h2>
<p>If the model is eventually completely loaded into the memory a total wall-clock time of incremental conversions can be greater comparing to immediate (non-delayed) conversion. This can happen if model parts are loaded one by one inside the user application. On the other hand, if immediate conversion were used instead of delayed one, then the model would be imported faster thanks to intensive use of parallel computations inside CAD Exchanger SDK.</p>
<p>To deal with that various pipelining techniques to enable concurrency need to be applied in the user's code.</p>
<h2><a class="anchor" id="sdk_delayed_conversion_drawback_imbalance"></a>
Imbalanced data access times</h2>
<p>As real conversion happens during first data access then the same user's code may take significantly different time whether it is a first or consequent calls. For instance, in the following code</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> ProcessBRep (<span class="keyword">const</span> ModelData_Part&amp; thePart)</div><div class="line">{</div><div class="line">    ModelData_BRepRepresentation aBRep = thePart.BRepRepresentation();</div><div class="line">    <span class="keyword">const</span> ModelData_BodyList&amp; aList = aBRep.Get(); <span class="comment">//conversion happens inside during first call</span></div><div class="line"></div><div class="line">    <span class="comment">//process part bodies...</span></div><div class="line">}</div></div><!-- fragment --><p>a time of <a class="el" href="classcadex_1_1_model_data___b_rep_representation.html#a09bdee9bcddf37bee4f310fffc18aa55" title="Returns an associated topological object. ">ModelData_BRepRepresentation::Get()</a> execution will be essentially zero if the B-Rep has already been loaded. In the case of delayed conversion this call will take relatively considerable time as real conversion takes place. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
</div>
<div id="nav-path" class="navpath">
  <ul>
    <li class="footer">
      <a href="https://cadexchanger.com/custom-development" style="background: #226daa; color:#fff; padding: 6px; text-decoration: none; border-radius: 5px;">Custom Development</a>
      <a href="https://cadexchanger.com/products/gui" style="margin:5px;">GUI</a>
      <a href="https://cadexchanger.com/products/sdk" style="margin:5px;">SDK</a>
      <a href="https://cadexchanger.com/products/cli" style="margin:5px;">CLI</a>
      <a href="https://cadexchanger.com/products/web-toolkit" style="margin:5px;">Web Toolkit</a>
      <a href="https://cadexchanger.com/products/cloud" style="margin:5px;">Cloud</a>
      <a href="https://cadexchanger.com/products/cloud-api" style="margin:5px;">Cloud API</a>
      <a href="https://cadexchanger.com/iges" style="margin:5px; color: #838383;">IGES</a>
      <a href="https://cadexchanger.com/step" style="margin:5px; color: #838383;">STEP</a>
      <a href="https://cadexchanger.com/parasolid" style="margin:5px; color: #838383;">Parasolid</a>
      <a href="https://cadexchanger.com/acis" style="margin:5px; color: #838383;">ACIS</a>
      <a href="https://cadexchanger.com/jt" style="margin:5px; color: #838383;">JT</a>
      <a href="https://cadexchanger.com/stl" style="margin:5px; color: #838383;">STL</a>
      <a href="https://cadexchanger.com/obj" style="margin:5px; color: #838383;">OBJ</a>
      <a href="https://cadexchanger.com/solidworks" style="margin:5px; color: #838383;">SolidWorks</a>
      <a href="https://cadexchanger.com/creo" style="margin:5px; color: #838383;">Creo</a>
      <a href="https://cadexchanger.com/nx" style="margin:5px; color: #838383;">NX</a>
      <a href="https://cadexchanger.com/catia" style="margin:5px; color: #838383;">CATIA</a>
      <a href="https://cadexchanger.com/ifc" style="margin:5px; color: #838383;">IFC</a>
      <a href="https://cadexchanger.com/rhino" style="margin:5px; color: #838383;">Rhino</a>
      <a href="https://cadexchanger.com/vrml" style="margin:5px; color: #838383;">VRML</a>
      <a href="https://cadexchanger.com/fbx" style="margin:5px; color: #838383;">FBX</a>
      <a href="https://cadexchanger.com/gltf" style="margin:5px; color: #838383;">GLTF</a>
      <a href="https://cadexchanger.com/dxf" style="margin:5px; color: #838383;">DXF</a>
      <a href="https://cadexchanger.com/dwg" style="margin:5px; color: #838383;">DWG</a>
      <a href="https://cadexchanger.com/collada" style="margin:5px; color: #838383;">Collada</a>
      <a href="https://cadexchanger.com/3ds" style="margin:5px; color: #838383;">3DS</a>
      <a href="https://cadexchanger.com/x3d" style="margin:5px; color: #838383;">X3D</a>
      <a href="https://cadexchanger.com/3mf" style="margin:5px; color: #838383;">3MF</a>
      <a href="https://cadexchanger.com/u3d" style="margin:5px; color: #838383;">U3D</a>
      <a href="https://cadexchanger.com/3dpdf" style="margin:5px; color: #838383;">3D PDF</a>
      <a href="https://cadexchanger.com/prc" style="margin:5px; color: #838383;">PRC</a>
      <a href="https://cadexchanger.com/brep" style="margin:5px; color: #838383;">BRep</a>
      <a href="https://cadexchanger.com/usd" style="margin:5px; color: #838383;">USD</a>
      <a href="https://cadexchanger.com/" style="margin:5px; color: #838383;">cadexchanger.com</a>
    </li>
  </ul>
</div>
</body>
</html>
