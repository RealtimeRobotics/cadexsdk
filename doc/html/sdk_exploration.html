<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CAD Exchanger SDK: Exploring 3D Models</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link rel="icon" type="image/png" sizes="16x16" href="https://cloud.cadexchanger.com/assets/images/icon16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://cloud.cadexchanger.com/assets/images/icon32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://cloud.cadexchanger.com/assets/images/icon96.png">
<link href="https://fonts.googleapis.com/css?family=Nunito:300" rel="stylesheet">
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="cadex_doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<a id="logo" href="https://cadexchanger.com/products/sdk" style="height:48px">
  <img id="projectlogo" alt="Logo" src="logo-36.png"/>
  <span id="projectname" style="padding-left:0.5em;">CAD Exchanger SDK</span>
</a>
</div>
<div class="body-content">
<div class="collapsible">
  <a id="show-menu-button" href="#">Hide menu</a>
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sdk_exploration.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Exploring 3D Models </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#sdk_exploration_overview">Overview</a></li>
<li class="level1"><a href="#sdk_exploration_examples">Examples</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="sdk_exploration_overview"></a>
Overview</h1>
<p>CAD Exchanger SDK allows to explore 3D models (imported from external files or created inside users' applications) traversing over their product structures, part representations and various associated data (properties, materials, transformation matrices, etc).</p>
<p>This scenario can be used if you need to <a class="el" href="sdk_usage_visualization.html">visualize 3D data</a> in your application, to perform some computations, to identify some components (assemblies, parts) or to retrieve some information from the external files.</p>
<p>When importing a file CAD Exchanger SDK populates a <a class="el" href="classcadex_1_1_model_data___model.html" title="Provides CAD Exchanger data model. ">ModelData_Model</a> object which can then be explored. Depending on the application needs, the following information can be retrieved: </p><ul>
<li>product structure - root elements, hierarchical graph of sub-assemblies and parts, transformation matrices applied to instances of parts/assemblies; </li>
<li><a class="el" href="classcadex_1_1_model_data___b_rep_representation.html">B-Rep representation</a> - detailed <a class="el" href="sdk_data_model_geometry_topology.html">geometrical and topological</a> description of part bodies (curves and surfaces, edges and faces, point coordinates, etc); </li>
<li><a class="el" href="classcadex_1_1_model_data___poly_representation.html">polygonal representation</a> - tessellated representation of parts (sets of triangles, polylines or point clouds, including vertex coordinates, normals, etc); </li>
<li>associated names, visual appearance attributes (colors, materials), layers, properties and other meta-data.</li>
</ul>
<p>The following example provides some excerpts of how the exploration could be organized:</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> DumpTriangleSet (<span class="keyword">const</span> ModelData_IndexedTriangleSet&amp; theTS,</div><div class="line">    <span class="keyword">const</span> ModelData_Transformation&amp; theTrsf)</div><div class="line">{</div><div class="line">    <a class="code" href="classcadex_1_1_model_data___poly_vertex_set.html#aa8d49def8ca017363fda57821b4b08a5">ModelData_IndexedTriangleSet::IndexType</a> n = theTS.NumberOfFaces();</div><div class="line"></div><div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Triangle set contains &quot;</span> &lt;&lt; n &lt;&lt; <span class="stringliteral">&quot; triangles&quot;</span> &lt;&lt; endl;</div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; ++i) {</div><div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Triangle &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; endl;</div><div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;    Node coordinates:&quot;</span> &lt;&lt; endl;</div><div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 3; ++j) {</div><div class="line">            <span class="keyword">const</span> ModelData_IndexedTriangleSet::CoordType&amp; aV = theTS.Coordinate (i, j);</div><div class="line">            <span class="keywordtype">double</span> aX = aV.X(), aY = aV.Y(), aZ = aV.Z();</div><div class="line">            theTrsf.Transform (aX, aY, aZ);</div><div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;    (&quot;</span> &lt;&lt; aX &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; aY &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; aZ &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> ExplorePoly (<span class="keyword">const</span> ModelData_PolyRepresentation&amp; thePoly, <span class="keyword">const</span> ModelData_Transformation&amp; theTrsf)</div><div class="line">{</div><div class="line">    <span class="keyword">const</span> ModelData_PolyShapeList&amp; aList = thePoly.Get();</div><div class="line">    <span class="keywordflow">for</span> (ModelData_PolyShapeList::SizeType i = 0; i &lt; aList.Size(); ++i) {</div><div class="line">        <span class="keyword">const</span> ModelData_PolyVertexSet&amp; aPVS = aList[i];</div><div class="line">        <span class="keywordflow">if</span> (aPVS.TypeId() == ModelData_IndexedTriangleSet::GetTypeId()) {</div><div class="line">            DumpTriangleSet (static_cast&lt;const ModelData_IndexedTriangleSet&amp;&gt; (aPVS), theTrsf);</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">class </span>SceneGraphVisitor : <span class="keyword">public</span> ModelData_Model::ElementVisitor</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    SceneGraphVisitor()</div><div class="line">    {</div><div class="line">        ModelData_Transformation anIdentity;</div><div class="line">        myTrsfs.push (anIdentity);</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">protected</span>:</div><div class="line"></div><div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> operator() (<span class="keyword">const</span> ModelData_Part&amp; thePart)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        PrintName (<span class="stringliteral">&quot;Part&quot;</span>, thePart.Name());</div><div class="line"></div><div class="line">        <span class="comment">//representations</span></div><div class="line">        ModelData_Part::RepresentationIterator i (thePart);</div><div class="line">        <span class="keywordflow">while</span> (i.HasNext()) {</div><div class="line">            <span class="keyword">const</span> ModelData_Representation&amp; aRep = i.Next();</div><div class="line">            <span class="keywordflow">if</span> (aRep.TypeId() == ModelData_PolyRepresentation::GetTypeId()) {</div><div class="line">                ExplorePoly (static_cast&lt;const ModelData_PolyRepresentation&amp;&gt; (aRep), CurrentTransformation());</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> VisitEnter (<span class="keyword">const</span> ModelData_Instance&amp; theInstance)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        PrintName (<span class="stringliteral">&quot;Instance&quot;</span>, theInstance.Name());</div><div class="line">        <span class="comment">// Get a transformation matrix</span></div><div class="line">        ModelData_Transformation aTrsf;</div><div class="line">        <span class="keywordflow">if</span> (theInstance.HasTransformation()) {</div><div class="line">            aTrsf = theInstance.Transformation();</div><div class="line">        }</div><div class="line">        ModelData_Transformation aCumulativeTrsf = CurrentTransformation() * aTrsf;</div><div class="line">        myTrsfs.push (aCumulativeTrsf);</div><div class="line"></div><div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> VisitLeave (<span class="keyword">const</span> ModelData_Instance&amp; <span class="comment">/*theInstance*/</span>)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        myTrsfs.pop();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">const</span> ModelData_Transformation&amp; CurrentTransformation()<span class="keyword"> const</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="keywordflow">return</span> myTrsfs.top();</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    std::stack&lt;ModelData_Transformation&gt;    myTrsfs;</div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line">ModelData_Model aModel;</div><div class="line">JT_Reader aReader;</div><div class="line"><span class="keywordflow">if</span> (aReader.ReadFile (theSource) &amp;&amp; aReader.Transfer (theModel)) {</div><div class="line">    SceneGraphVisitor aSGVisitor;</div><div class="line">    aModel.Accept (aSGVisitor);</div><div class="line">}</div></div><!-- fragment --><p>When traversing the assembly graph which may contain multiple shared components, make sure to track transformation matrices applied to different instances along the graph in order to correctly convert local coordinates to global ones. If visiting already visited elements is not required make sure to use <a class="el" href="classcadex_1_1_model_data___scene_graph_element_unique_visitor.html" title="Defines a visitor that visits each unique element only once. ">ModelData_SceneGraphElementUniqueVisitor</a>.</p>
<p>For detailed descriptions of how to retrieve particular elements refer to particular documentation sections, including <a class="el" href="sdk_data_model_product_structure.html#sdk_data_model_product_structure_traversal">Traversal of the product structure</a>, <a class="el" href="sdk_data_model_representations.html#sdk_data_model_representations_traversal">Traversal over the representations</a>, <a class="el" href="sdk_data_model_properties.html#sdk_data_model_properties_traversal">Traversal over properties</a>, <a class="el" href="classcadex_1_1_model_data___shape.html#sdk_data_model_topology_exploration">B-Rep Topology Exploration</a> and others.</p>
<h1><a class="anchor" id="sdk_exploration_examples"></a>
Examples</h1>
<p>Refer to <a class="el" href="sdk_all_examples.html#sdk_examples_model_exploring_section">Model Exploring</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
</div>
<div id="nav-path" class="navpath">
  <ul>
    <li class="footer">
      <a href="https://cadexchanger.com/custom-development" style="background: #226daa; color:#fff; padding: 6px; text-decoration: none; border-radius: 5px;">Custom Development</a>
      <a href="https://cadexchanger.com/products/gui" style="margin:5px;">GUI</a>
      <a href="https://cadexchanger.com/products/sdk" style="margin:5px;">SDK</a>
      <a href="https://cadexchanger.com/products/cli" style="margin:5px;">CLI</a>
      <a href="https://cadexchanger.com/products/web-toolkit" style="margin:5px;">Web Toolkit</a>
      <a href="https://cadexchanger.com/products/cloud" style="margin:5px;">Cloud</a>
      <a href="https://cadexchanger.com/products/cloud-api" style="margin:5px;">Cloud API</a>
      <a href="https://cadexchanger.com/iges" style="margin:5px; color: #838383;">IGES</a>
      <a href="https://cadexchanger.com/step" style="margin:5px; color: #838383;">STEP</a>
      <a href="https://cadexchanger.com/parasolid" style="margin:5px; color: #838383;">Parasolid</a>
      <a href="https://cadexchanger.com/acis" style="margin:5px; color: #838383;">ACIS</a>
      <a href="https://cadexchanger.com/jt" style="margin:5px; color: #838383;">JT</a>
      <a href="https://cadexchanger.com/stl" style="margin:5px; color: #838383;">STL</a>
      <a href="https://cadexchanger.com/obj" style="margin:5px; color: #838383;">OBJ</a>
      <a href="https://cadexchanger.com/solidworks" style="margin:5px; color: #838383;">SolidWorks</a>
      <a href="https://cadexchanger.com/creo" style="margin:5px; color: #838383;">Creo</a>
      <a href="https://cadexchanger.com/nx" style="margin:5px; color: #838383;">NX</a>
      <a href="https://cadexchanger.com/catia" style="margin:5px; color: #838383;">CATIA</a>
      <a href="https://cadexchanger.com/ifc" style="margin:5px; color: #838383;">IFC</a>
      <a href="https://cadexchanger.com/rhino" style="margin:5px; color: #838383;">Rhino</a>
      <a href="https://cadexchanger.com/vrml" style="margin:5px; color: #838383;">VRML</a>
      <a href="https://cadexchanger.com/fbx" style="margin:5px; color: #838383;">FBX</a>
      <a href="https://cadexchanger.com/gltf" style="margin:5px; color: #838383;">GLTF</a>
      <a href="https://cadexchanger.com/dxf" style="margin:5px; color: #838383;">DXF</a>
      <a href="https://cadexchanger.com/dwg" style="margin:5px; color: #838383;">DWG</a>
      <a href="https://cadexchanger.com/collada" style="margin:5px; color: #838383;">Collada</a>
      <a href="https://cadexchanger.com/3ds" style="margin:5px; color: #838383;">3DS</a>
      <a href="https://cadexchanger.com/x3d" style="margin:5px; color: #838383;">X3D</a>
      <a href="https://cadexchanger.com/3mf" style="margin:5px; color: #838383;">3MF</a>
      <a href="https://cadexchanger.com/u3d" style="margin:5px; color: #838383;">U3D</a>
      <a href="https://cadexchanger.com/3dpdf" style="margin:5px; color: #838383;">3D PDF</a>
      <a href="https://cadexchanger.com/prc" style="margin:5px; color: #838383;">PRC</a>
      <a href="https://cadexchanger.com/brep" style="margin:5px; color: #838383;">BRep</a>
      <a href="https://cadexchanger.com/usd" style="margin:5px; color: #838383;">USD</a>
      <a href="https://cadexchanger.com/" style="margin:5px; color: #838383;">cadexchanger.com</a>
    </li>
  </ul>
</div>
</body>
</html>
