<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CAD Exchanger SDK: Visual Appearances</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link rel="icon" type="image/png" sizes="16x16" href="https://cloud.cadexchanger.com/assets/images/icon16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://cloud.cadexchanger.com/assets/images/icon32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://cloud.cadexchanger.com/assets/images/icon96.png">
<link href="https://fonts.googleapis.com/css?family=Nunito:300" rel="stylesheet">
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="cadex_doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<a id="logo" href="https://cadexchanger.com/products/sdk" style="height:48px">
  <img id="projectlogo" alt="Logo" src="logo-36.png"/>
  <span id="projectname" style="padding-left:0.5em;">CAD Exchanger SDK</span>
</a>
</div>
<div class="body-content">
<div class="collapsible">
  <a id="show-menu-button" href="#">Hide menu</a>
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sdk_data_model_styles.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Visual Appearances </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#sdk_data_model_appearance_attach">Attachment and Query</a></li>
<li class="level1"><a href="#sdk_data_model_styles_color">Color</a></li>
<li class="level1"><a href="#sdk_data_model_styles_material">Material</a></li>
<li class="level1"><a href="#sdk_data_model_styles_retrieve">Retrieval of visual styles</a></li>
<li class="level1"><a href="#sdk_data_model_styles_conventions">Conventions on Using Appearances</a></li>
<li class="level1"><a href="#sdk_data_model_styles_sharing">Sharing of styles</a></li>
</ul>
</div>
<div class="textblock"><p><a class="el" href="sdk_data_model_product_structure.html#sdk_data_model_product_structure_types">Scene graph elements</a>, bodies and subshapes in <a class="el" href="classcadex_1_1_model_data___b_rep_representation.html">B-Rep representation</a> and mesh objects (triangle/line/point sets) in <a class="el" href="classcadex_1_1_model_data___poly_representation.html">Polygonal representation</a> may have attached visual appearances.</p>
<p>The appearance (<a class="el" href="classcadex_1_1_model_data___appearance.html" title="Provides an interface to appearance which is a collection of visual styles. ">ModelData_Appearance</a>) defines how this object should be visualized and contain the following components: </p><ul>
<li>material - defines graphical material. </li>
<li>generic color - defines an RGBA color. </li>
<li>line styles - define line properties.</li>
</ul>
<h1><a class="anchor" id="sdk_data_model_appearance_attach"></a>
Attachment and Query</h1>
<p>Appearance of the scene graph element can be set using ModelData_SceneGraphElement::SetAppearance() and retrieved with ModelData_SceneGraphElement::Appearance(). By default, no appearance is attached and null appearance is returned. Sub-shapes in B-Rep representation and meshes in polygonal representations are set using <a class="el" href="classcadex_1_1_model_data___b_rep_representation.html#a3ae969db8bdf1eb56806102abda4d7f0">ModelData_BRepRepresentation::SetAppearance()</a> and ModelData_PolyVertexSet::SetAppearance().</p>
<h1><a class="anchor" id="sdk_data_model_styles_color"></a>
Color</h1>
<p>Generic color is used to define a simple RGBA color, when a more feature-rich style (e.g. material) is not available. For instance, a generic color is used when importing a model from formats which only support simple colors (e.g. Parasolid). Generic colors allow to reduce memory footprint comparing to use of materials.</p>
<p>When both a material and a generic color are defined the material value prevails.</p>
<p>The following example demonstrates creation and assignment of a color: </p><div class="fragment"><div class="line">ModelData_Color aColor (1.f, 0.f, 0.f); <span class="comment">//red</span></div><div class="line">ModelData_Appearance anAppearance (aColor);</div><div class="line">aPart.SetAppearance (anAppearance);</div><div class="line"><span class="comment">//or simply aPart.SetAppearance (aColor);</span></div></div><!-- fragment --><h1><a class="anchor" id="sdk_data_model_styles_material"></a>
Material</h1>
<p>Material definition (<a class="el" href="classcadex_1_1_model_data___material.html" title="Provides a data container for material. ">ModelData_Material</a>) is aligned with the OpenGL definition. A material contains: </p><ul>
<li>color components: ambient, diffuse, specular, and emission colors as RGBA values; </li>
<li>shininess as float.</li>
</ul>
<p>The following screenshot demonstrates an assembly with parts of different material settings, including transparency: </p><div class="image">
<img src="dm_material_transparency.png" alt="dm_material_transparency.png"/>
<div class="caption">
Parts with different materials</div></div>
<p> The following example demonstrates creation and assignment of a material: </p><div class="fragment"><div class="line">ModelData_Color aDiffuseColor (1.f, 0.5f, 0.25f, 1.f);</div><div class="line">ModelData_Material aMaterial (aDiffuseColor);</div><div class="line">aMaterial.Shininess() = 96.f;</div><div class="line">aPart.SetAppearance (ModelData_Appearance (aMaterial));</div></div><!-- fragment --><h1><a class="anchor" id="sdk_data_model_styles_retrieve"></a>
Retrieval of visual styles</h1>
<p>The following example demonstrates how to retrieve material or generic color as a material: </p><div class="fragment"><div class="line">ModelData_Appearance anAppearance = aPart.Appearance();</div><div class="line"><span class="keywordflow">if</span> (anAppearance) {</div><div class="line">    ModelData_Material aMaterial;</div><div class="line">    <span class="keywordflow">if</span> (anAppearance.ToMaterial (aMaterial)) {</div><div class="line">        <span class="comment">//...</span></div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>The following example demonstrates how to retrieve material or generic color as a simple color: </p><div class="fragment"><div class="line">ModelData_Appearance anAppearance = aPart.Appearance();</div><div class="line"><span class="keywordflow">if</span> (anAppearance) {</div><div class="line">    ModelData_Color aColor;</div><div class="line">    <span class="keywordflow">if</span> (anAppearance.ToColor (aColor)) {</div><div class="line">        <span class="comment">//...</span></div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="sdk_data_model_styles_conventions"></a>
Conventions on Using Appearances</h1>
<ul>
<li>Assemblies should not have own appearances. Such appearance most likely will be ignored by any algorithm (e.g. by an exporter to some target format). If all children in the assembly must use some common appearance (e.g. be of a yellow color) then an extra instance should be created which would refer to the assembly and own the desired appearance.</li>
</ul>
<ul>
<li>Appearance attributes attached to a deeper element overide the appearance attributes attached to parent element. Thus, if a part has an appearance attribute it shall override any other appearance attribute attached at any instance up in the hieararchy. Likewise, an appearance attribute attached at some B-Rep face shall override any parent part's or instance's attribute.</li>
</ul>
<h1><a class="anchor" id="sdk_data_model_styles_sharing"></a>
Sharing of styles</h1>
<p>To enable sharing (i.e. instead of duplicating) of materials and colors, they should be assigned via ModelData_MaterialObject and ModelData_ColorObject respectively. They subclass <a class="el" href="classcadex_1_1_model_data___base_object.html" title="Base class for all objects that have private implementation (pimpl) back-end. ">ModelData_BaseObject</a> which enable sharing and refer to <a class="el" href="classcadex_1_1_model_data___material.html" title="Provides a data container for material. ">ModelData_Material</a> and <a class="el" href="classcadex_1_1_model_data___color.html" title="Defines an RGBA color (with alpha channel). ">ModelData_Color</a> respectively, which are simple POD's (Plain Old Data, i.e. simple data containers).</p>
<p>The following example demonstrate this: </p><div class="fragment"><div class="line">std::unordered_map&lt;std::string, ModelData_MaterialObject&gt; aMaterialLibrary;</div><div class="line">aMaterialLibrary.emplace (<span class="stringliteral">&quot;bronze&quot;</span>, ModelData_MaterialObject (ModelData_Material (</div><div class="line">    ModelData_Color (0.2125f, 0.1275f, 0.054f),        <span class="comment">//ambient</span></div><div class="line">    ModelData_Color (0.714f, 0.4284f, 0.18144f),       <span class="comment">//diffuse</span></div><div class="line">    ModelData_Color (0.393548f, 0.271906f, 0.166721f), <span class="comment">//specular</span></div><div class="line">    ModelData_Color (0.f, 0.f, 0.f),                   <span class="comment">//emissive</span></div><div class="line">    25.6f                                              <span class="comment">//shininess</span></div><div class="line">    )));</div><div class="line"></div><div class="line">...</div><div class="line">aPart1.SetAppearance (aMaterialLibrary[<span class="stringliteral">&quot;bronze&quot;</span>]);</div><div class="line">ModelData_MaterialObject aMat1 = aPart1.Appearance().Material();</div><div class="line">...</div><div class="line">aPart2.SetAppearance (aMaterialLibrary[<span class="stringliteral">&quot;bronze&quot;</span>]);</div><div class="line">ModelData_MaterialObject aMat2 = aPart2.Appearance().Material();</div><div class="line"></div><div class="line">assert (aMat1 == aMat2); <span class="comment">//sharing</span></div></div><!-- fragment --><p>In the above approach materials will be shared but <a class="el" href="classcadex_1_1_model_data___appearance.html" title="Provides an interface to appearance which is a collection of visual styles. ">ModelData_Appearance</a> objects will still be distinct. To enable sharing of appearances just store the appearance objects:</p>
<div class="fragment"><div class="line"><span class="comment">//appearance libraries</span></div><div class="line">std::unordered_map&lt;std::string, ModelData_Appearance&gt; anAppearanceLibrary;</div><div class="line">anAppearanceLibrary.emplace (<span class="stringliteral">&quot;bronze&quot;</span>, ModelData_MaterialObject (ModelData_Material (</div><div class="line">    ModelData_Color (0.2125f, 0.1275f, 0.054f),        <span class="comment">//ambient</span></div><div class="line">    ModelData_Color (0.714f, 0.4284f, 0.18144f),       <span class="comment">//diffuse</span></div><div class="line">    ModelData_Color (0.393548f, 0.271906f, 0.166721f), <span class="comment">//specular</span></div><div class="line">    ModelData_Color (0.f, 0.f, 0.f),                   <span class="comment">//emissive</span></div><div class="line">    25.6f                                              <span class="comment">//shininess</span></div><div class="line">    )));</div><div class="line"></div><div class="line">...</div><div class="line">aPart1.SetAppearance (anAppearanceLibrary[<span class="stringliteral">&quot;bronze&quot;</span>]);</div><div class="line">ModelData_Appearance anAppearance1 = aPart1.Appearance();</div><div class="line">...</div><div class="line">aPart2.SetAppearance (anAppearanceLibrary[<span class="stringliteral">&quot;bronze&quot;</span>]);</div><div class="line">ModelData_Appearance anAppearance2 = aPart2.Appearance();</div><div class="line"></div><div class="line">assert (anAppearance1 == anAppearance2); <span class="comment">//sharing</span></div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
</div>
<div id="nav-path" class="navpath">
  <ul>
    <li class="footer">
      <a href="https://cadexchanger.com/custom-development" style="background: #226daa; color:#fff; padding: 6px; text-decoration: none; border-radius: 5px;">Custom Development</a>
      <a href="https://cadexchanger.com/products/gui" style="margin:5px;">GUI</a>
      <a href="https://cadexchanger.com/products/sdk" style="margin:5px;">SDK</a>
      <a href="https://cadexchanger.com/products/cli" style="margin:5px;">CLI</a>
      <a href="https://cadexchanger.com/products/web-toolkit" style="margin:5px;">Web Toolkit</a>
      <a href="https://cadexchanger.com/products/cloud" style="margin:5px;">Cloud</a>
      <a href="https://cadexchanger.com/products/cloud-api" style="margin:5px;">Cloud API</a>
      <a href="https://cadexchanger.com/iges" style="margin:5px; color: #838383;">IGES</a>
      <a href="https://cadexchanger.com/step" style="margin:5px; color: #838383;">STEP</a>
      <a href="https://cadexchanger.com/parasolid" style="margin:5px; color: #838383;">Parasolid</a>
      <a href="https://cadexchanger.com/acis" style="margin:5px; color: #838383;">ACIS</a>
      <a href="https://cadexchanger.com/jt" style="margin:5px; color: #838383;">JT</a>
      <a href="https://cadexchanger.com/stl" style="margin:5px; color: #838383;">STL</a>
      <a href="https://cadexchanger.com/obj" style="margin:5px; color: #838383;">OBJ</a>
      <a href="https://cadexchanger.com/solidworks" style="margin:5px; color: #838383;">SolidWorks</a>
      <a href="https://cadexchanger.com/creo" style="margin:5px; color: #838383;">Creo</a>
      <a href="https://cadexchanger.com/nx" style="margin:5px; color: #838383;">NX</a>
      <a href="https://cadexchanger.com/catia" style="margin:5px; color: #838383;">CATIA</a>
      <a href="https://cadexchanger.com/ifc" style="margin:5px; color: #838383;">IFC</a>
      <a href="https://cadexchanger.com/rhino" style="margin:5px; color: #838383;">Rhino</a>
      <a href="https://cadexchanger.com/vrml" style="margin:5px; color: #838383;">VRML</a>
      <a href="https://cadexchanger.com/fbx" style="margin:5px; color: #838383;">FBX</a>
      <a href="https://cadexchanger.com/gltf" style="margin:5px; color: #838383;">GLTF</a>
      <a href="https://cadexchanger.com/dxf" style="margin:5px; color: #838383;">DXF</a>
      <a href="https://cadexchanger.com/dwg" style="margin:5px; color: #838383;">DWG</a>
      <a href="https://cadexchanger.com/collada" style="margin:5px; color: #838383;">Collada</a>
      <a href="https://cadexchanger.com/3ds" style="margin:5px; color: #838383;">3DS</a>
      <a href="https://cadexchanger.com/x3d" style="margin:5px; color: #838383;">X3D</a>
      <a href="https://cadexchanger.com/3mf" style="margin:5px; color: #838383;">3MF</a>
      <a href="https://cadexchanger.com/u3d" style="margin:5px; color: #838383;">U3D</a>
      <a href="https://cadexchanger.com/3dpdf" style="margin:5px; color: #838383;">3D PDF</a>
      <a href="https://cadexchanger.com/prc" style="margin:5px; color: #838383;">PRC</a>
      <a href="https://cadexchanger.com/brep" style="margin:5px; color: #838383;">BRep</a>
      <a href="https://cadexchanger.com/usd" style="margin:5px; color: #838383;">USD</a>
      <a href="https://cadexchanger.com/" style="margin:5px; color: #838383;">cadexchanger.com</a>
    </li>
  </ul>
</div>
</body>
</html>
